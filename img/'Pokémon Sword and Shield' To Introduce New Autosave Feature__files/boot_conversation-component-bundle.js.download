(window.webpackJsonp_spotim_580132258=window.webpackJsonp_spotim_580132258||[]).push([[16],{131:function(e,t,n){"use strict";(function(e){var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getState=function(){return o.getState()},t.getDispatch=function(){return o.dispatch},t.initializeStore=function(t){void 0===t&&(t={});var n=[i.default];0;var a=[s.applyMiddleware.apply(void 0,n)],u=s.compose;o=(0,s.createStore)((0,r.default)(),t,u.apply(void 0,a)),!1;e.window&&(window.__SPOTIM_DEV_STORE__=o);return o};a(n(6));var o,s=n(18),i=a(n(20)),r=(n(464),a(n(48)))}).call(this,n(73))},311:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.SortBy=void 0,t.SortBy=a,function(e){e.BEST="best",e.NEWEST="newest",e.OLDEST="oldest",e.SOCIAL="social"}(a||(t.SortBy=a={}))},566:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getNotifications=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.reset,n=void 0!==t&&t;return function(){var e=(0,s.default)(o.default.mark((function e(t,a){var s,c,l,f,p,m,v,_,g,y,w;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a(),c=(0,u.getPageInfo)(s.notifications),l=c.offset,f=c.count,n&&(l=0,f=0),t({type:d.GET_START}),e.prev=4,e.next=7,i.default.getNotifications(l,f);case 7:p=e.sent,m=p.body,v=(0,r.parseNotifications)(m),_=v.unreadCount,g=v.unseenCount,y=v.totalCount,w=v.notifications,t({type:d.GET_END,payload:{notifications:w,unreadCount:_,unseenCount:g,totalCount:y,offset:l,reset:n}}),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(4);case 15:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,n){return e.apply(this,arguments)}}()};var o=a(n(40)),s=a(n(41)),i=a(n(167)),r=n(567),u=n(157),d=n(99)},567:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.parseNotifications=function(e){var t=o.default.map(e,{total_unread:"unreadCount",total_unseen:"unseenCount",total:"totalCount",notifications:{"~":"notifications",id:"id",type:"type",read:"read",updated_at:"updatedAt",conversation_id:"conversationId",conversation_url:"conversationUrl",conversation_title:"conversationTitle",total_count:"totalCount",replier_id:"userId",liker_id:"userId",mentioner_id:"userId",reply:(0,i.getMessageMap)("message"),message:(0,i.getMessageMap)("message"),users:(0,s.getUsersMap)("users")}});return t.notifications=t.notifications||[],t.notifications=t.notifications.map((function(e){return e.messageId=e.message.id,e.message.depth="comment"===e.message.type?0:1,(0,r.linkUsersToMessage)(e.message,e.users),e})),t};var o=a(n(64)),s=n(568),i=n(303),r=n(570)},580:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.parseConversation=function(e){var t=o.default.map(e,(0,s.getConversationMap)("conversation"),{avatars:"followersIds",offset:"pagination.offset",comments_read:"pagination.commentsRead",has_next:"pagination.hasNext",sort_by:"pagination.sortBy",star_rating_summary:"starRatingSummary"}),n=t.conversation,a=t.followersIds,l=t.pagination,f=t.starRatingSummary;n.postId=(0,d.default)(n.id);var p=(0,r.parseMessage)(n.id,{comments:(0,c.flatComments)(e.comments),users:e.users}),m=p.comments,v=p.usersList,_=[];a&&(_=(0,u.default)(a,v));return l.sortBy=l.sortBy||i.BEST,{conversation:n,followersIds:a,pagination:l,comments:m,followers:_,starRatingSummary:f}},t.parseLiveBlog=function(e,t){var n=o.default.map(e,(0,s.getConversationMap)("conversation"),{avatars:"followersIds",offset:"pagination.offset",comments_read:"pagination.commentsRead",has_next:"pagination.hasNext",sort_by:"pagination.sortBy"}),a=n.conversation,d=n.followersIds,c=n.pagination,l=o.default.map(t,{id:"id",code:"code",title:"title",where:"location",live:"live",started_at:"startTime",end_date:"endDate",end_hour:"endHour",end_minute:"endMinute",next_occurrence:"nextStartTime",reporters_ids:"reporters",comments_disabled:"commentsDisabled",repeating:"isRepeating",weekly_days:"repeatingDays"}),f=(0,r.parseMessage)(a.id,e),p=f.comments,m=f.usersList;p=p.filter((function(e){return!e.isDeleted}));var v=[];d&&(v=(0,u.default)(d,m));return c.sortBy=c.sortBy||i.BEST,{conversation:a,event:l,followersIds:d,pagination:c,comments:p,followers:v}};var o=a(n(64)),s=n(1175),i=n(258),r=n(203),u=a(n(1177)),d=a(n(314)),c=n(204)}}]);
//# sourceMappingURL=boot~conversation-component-bundle.js.map