Drupal.cmd.push(function(){(function(){'use strict';var f,g=[];function l(a){g.push(a);1==g.length&&f()}function m(){for(;g.length;)g[0](),g.shift()}f=function(){setTimeout(m)};function n(a){this.a=p;this.b=void 0;this.f=[];var b=this;try{a(function(a){q(b,a)},function(a){r(b,a)})}catch(c){r(b,c)}}var p=2;function t(a){return new n(function(b,c){c(a)})}function u(a){return new n(function(b){b(a)})}function q(a,b){if(a.a==p){if(b==a)throw new TypeError;var c=!1;try{var d=b&&b.then;if(null!=b&&"object"==typeof b&&"function"==typeof d){d.call(b,function(b){c||q(a,b);c=!0},function(b){c||r(a,b);c=!0});return}}catch(e){c||r(a,e);return}a.a=0;a.b=b;v(a)}}
function r(a,b){if(a.a==p){if(b==a)throw new TypeError;a.a=1;a.b=b;v(a)}}function v(a){l(function(){if(a.a!=p)for(;a.f.length;){var b=a.f.shift(),c=b[0],d=b[1],e=b[2],b=b[3];try{0==a.a?"function"==typeof c?e(c.call(void 0,a.b)):e(a.b):1==a.a&&("function"==typeof d?e(d.call(void 0,a.b)):b(a.b))}catch(h){b(h)}}})}n.prototype.g=function(a){return this.c(void 0,a)};n.prototype.c=function(a,b){var c=this;return new n(function(d,e){c.f.push([a,b,d,e]);v(c)})};function w(a){return new n(function(b,c){function d(c){return function(d){h[c]=d;e+=1;e==a.length&&b(h)}}var e=0,h=[];0==a.length&&b(h);for(var k=0;k<a.length;k+=1)u(a[k]).c(d(k),c)})}function x(a){return new n(function(b,c){for(var d=0;d<a.length;d+=1)u(a[d]).c(b,c)})};window.Promise||(window.Promise=n,window.Promise.resolve=u,window.Promise.reject=t,window.Promise.race=x,window.Promise.all=w,window.Promise.prototype.then=n.prototype.c,window.Promise.prototype["catch"]=n.prototype.g)}());(function(){function l(a,b){document.addEventListener?a.addEventListener("scroll",b,!1):a.attachEvent("scroll",b)}function m(a){document.body?a():document.addEventListener?document.addEventListener("DOMContentLoaded",function c(){document.removeEventListener("DOMContentLoaded",c);a()}):document.attachEvent("onreadystatechange",function k(){if("interactive"==document.readyState||"complete"==document.readyState)document.detachEvent("onreadystatechange",k),a()})};function t(a){this.a=document.createElement("div");this.a.setAttribute("aria-hidden","true");this.a.appendChild(document.createTextNode(a));this.b=document.createElement("span");this.c=document.createElement("span");this.h=document.createElement("span");this.f=document.createElement("span");this.g=-1;this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;";this.b.appendChild(this.h);this.c.appendChild(this.f);this.a.appendChild(this.b);this.a.appendChild(this.c)}
function u(a,b){a.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+b+";"}function z(a){var b=a.a.offsetWidth,c=b+100;a.f.style.width=c+"px";a.c.scrollLeft=c;a.b.scrollLeft=a.b.scrollWidth+100;return a.g!==b?(a.g=b,!0):!1}function A(a,b){function c(){var a=k;z(a)&&a.a.parentNode&&b(a.g)}var k=a;l(a.b,c);l(a.c,c);z(a)};function B(a,b){var c=b||{};this.family=a;this.style=c.style||"normal";this.weight=c.weight||"normal";this.stretch=c.stretch||"normal"}var C=null,D=null,E=null,F=null;function G(){if(null===D)if(J()&&/Apple/.test(window.navigator.vendor)){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);D=!!a&&603>parseInt(a[1],10)}else D=!1;return D}function J(){null===F&&(F=!!document.fonts);return F}
function K(){if(null===E){var a=document.createElement("div");try{a.style.font="condensed 100px sans-serif"}catch(b){}E=""!==a.style.font}return E}function L(a,b){return[a.style,a.weight,K()?a.stretch:"","100px",b].join(" ")}
B.prototype.load=function(a,b){var c=this,k=a||"BESbswy",r=0,n=b||3E3,H=(new Date).getTime();return new Promise(function(a,b){if(J()&&!G()){var M=new Promise(function(a,b){function e(){(new Date).getTime()-H>=n?b(Error(""+n+"ms timeout exceeded")):document.fonts.load(L(c,'"'+c.family+'"'),k).then(function(c){1<=c.length?a():setTimeout(e,25)},b)}e()}),N=new Promise(function(a,c){r=setTimeout(function(){c(Error(""+n+"ms timeout exceeded"))},n)});Promise.race([N,M]).then(function(){clearTimeout(r);a(c)},b)}else m(function(){function v(){var b;if(b=-1!=f&&-1!=g||-1!=f&&-1!=h||-1!=g&&-1!=h)(b=f!=g&&f!=h&&g!=h)||(null===C&&(b=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),C=!!b&&(536>parseInt(b[1],10)||536===parseInt(b[1],10)&&11>=parseInt(b[2],10))),b=C&&(f==w&&g==w&&h==w||f==x&&g==x&&h==x||f==y&&g==y&&h==y)),b=!b;b&&(d.parentNode&&d.parentNode.removeChild(d),clearTimeout(r),a(c))}function I(){if((new Date).getTime()-H>=n)d.parentNode&&d.parentNode.removeChild(d),b(Error(""+n+"ms timeout exceeded"));else{var a=document.hidden;if(!0===a||void 0===a)f=e.a.offsetWidth,g=p.a.offsetWidth,h=q.a.offsetWidth,v();r=setTimeout(I,50)}}var e=new t(k),p=new t(k),q=new t(k),f=-1,g=-1,h=-1,w=-1,x=-1,y=-1,d=document.createElement("div");d.dir="ltr";u(e,L(c,"sans-serif"));u(p,L(c,"serif"));u(q,L(c,"monospace"));d.appendChild(e.a);d.appendChild(p.a);d.appendChild(q.a);document.body.appendChild(d);w=e.a.offsetWidth;x=p.a.offsetWidth;y=q.a.offsetWidth;I();A(e,function(a){f=a;v()});u(e,L(c,'"'+c.family+'",sans-serif'));A(p,function(a){g=a;v()});u(p,L(c,'"'+c.family+'",serif'));A(q,function(a){h=a;v()});u(q,L(c,'"'+c.family+'",monospace'))})})};"object"===typeof module?module.exports=B:(window.FontFaceObserver=B,window.FontFaceObserver.prototype.load=B.prototype.load)}());(function($){Drupal.behaviors.dataLayer={langPrefixes:function langPrefixes(){var languages=Drupal.settings.dataLayer.languages,langList=[];for(var lang in languages){if(languages[lang].prefix!==''){langList.push(languages[lang].prefix)}}
return langList},attach:function(){return}}})(jQuery);jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}var l=m.path?"; path="+(m.path):"";var g=m.domain?"; domain="+(m.domain):"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};(function($){$.fn.pop=function(){var top=this.get(-1);this.splice(this.length-1,1);return top};$.fn.shift=function(){var bottom=this.get(0);this.splice(0,1);return bottom};$.fn.sticky=function(options){var element=$(this);if(element==undefined||element.length==0){return!1}
var stickyPosition=options.stickyPosition!=undefined?options.stickyPosition:0;var stickyTopOffset=options.stickyTopOffset!=undefined?options.stickyTopOffset:0;var footerMeetPointOffset=options.footerMeetPointOffset!=undefined?options.footerMeetPointOffset:0;var positionTopOffset=options.positionTopOffset!=undefined?options.ositionTopOffset:0;var scrollTop=$(window).scrollTop();var winHeight=$(window).height();var footerHeight=(options.footer!=undefined&&options.footer.length>0)?options.footer.height():0;var headerHeight=(options.header!=undefined&&options.header.length>0)?options.header.height():0;var footerTop=(options.footer!=undefined&&options.footer.length>0)?options.footer.offset().top:scrollTop+winHeight;var elementHeight=element.height();var elementTop=scrollTop+headerHeight;var footerMeetPoint=footerTop-elementTop-elementHeight-footerMeetPointOffset;if(footerMeetPoint<=0){if(!element.hasClass('position')){element.parents('.contextual-links-region').css('position','static');element.css('top',footerTop-elementHeight-positionTopOffset);element.addClass('position')}}else{if(element.hasClass('position')){element.parents('.contextual-links-region').css('position','relative');element.css('top','');element.removeClass('position')}
if(scrollTop>stickyPosition-headerHeight){element.addClass('sticky').css('top',headerHeight+stickyTopOffset)}else if(element.hasClass('sticky')){element.removeClass('sticky');element.css('top','')}}}})(jQuery);(function($){$(document).ready(function(){$('.ibtmedia-form-placeholder').each(function(){var placeholder=$(this).find('div:first');var form_id=placeholder.attr('class');$.get('/ibtmedia_form/'+form_id,function(data){placeholder.prepend(data);var event=form_id+'_loaded';$.event.trigger({type:event})})});$(document).on('search_block_form_loaded',function(){if(typeof Drupal.behaviors.apachesolr_autocomplete!='undefined'){Drupal.behaviors.apachesolr_autocomplete.attach()}})})})(jQuery);(function($){$.fn.shuffle=function(){return this.each(function(){var items=$(this).children().clone(!0);return(items.length)?$(this).html($.shuffle(items)):this})}
$.shuffle=function(arr){for(var j,x,i=arr.length;i;j=parseInt(Math.random()*i),x=arr[--i],arr[i]=arr[j],arr[j]=x);return arr}
Drupal.behaviors.newsweek={attach:function(context,settings){this.toggleExpandableHeight();if($('.shuffle').length){$('.shuffle').shuffle()}
var interval=setInterval(function(){$('.currency').shuffle()},1000);this.menuButtons();var is_ibtailored=0;if($('body').hasClass('page-ibtailored')||$('body').hasClass('node-type-nw-ibtailored')){is_ibtailored=1}
if($('body').hasClass('fontf')){this.fontfaceObserver()}else{if(ibtmedia_device=='desktop'&&!is_ibtailored){this.webfontLoader()}}
$('.social-share .genericon-facebook-alt').click(function(e){e.preventDefault();window.open($(this).attr('href'),'fbShareWindow','height=520, width=550, top='+($(window).height()/2-275)+', left='+($(window).width()/2-225)+', toolbar=0, location=0, menubar=0, directories=0, scrollbars=0');return!1});if($('.debate-slider').length>0){$('.debate-slider .slider').slick({slidesToShow:3,slidesToScroll:3,appendArrows:$('.debate-slider-arrows'),responsive:[{breakpoint:768,settings:{slidesToShow:1,slidesToScroll:1}},]})}},detectIE:function(){var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE ');if(msie>0){return parseInt(ua.substring(msie+5,ua.indexOf('.',msie)),10)}
var trident=ua.indexOf('Trident/');if(trident>0){var rv=ua.indexOf('rv:');return parseInt(ua.substring(rv+3,ua.indexOf('.',rv)),10)}
var edge=ua.indexOf('Edge/');if(edge>0){return parseInt(ua.substring(edge+5,ua.indexOf('.',edge)),10)}
return!1},detectFFX:function(){if(navigator.userAgent.toLowerCase().indexOf('firefox')>-1){$('body').addClass('ffx')}},menuButtons:function(){var body=$('body');var btn1=$('.lk-1');var btn2=$('.genericon-menu');var btn3=$('.btn-share');btn1.on('click',function(){if(btn1.parent().hasClass('expand')){btn1.parent().removeClass('expand')}else{body.removeClass('expand-menu');btn2.removeClass('genericon-close-alt');btn1.parent().addClass('expand')}});btn2.on('click',function(){if(body.hasClass('expand-menu')){body.removeClass('expand-menu');btn2.removeClass('genericon-close-alt')}else{btn1.parent().removeClass('expand');body.addClass('expand-menu');btn2.addClass('genericon-close-alt')}});btn3.on('click',function(){if(body.hasClass('expand-share')){body.removeClass('expand-share')}else{body.addClass('expand-share')}})},menuExpand:function(){var pageHeader=$('.page-header');var btnGlobal=$('.m-expand');var btnMenu=$('.m-expand.menu');var targetBody=$('body');if(pageHeader.length>0){pageHeader.on('click','.menu-search .m-expand',function(event){var toggle=$(this);if(toggle.hasClass('active')){toggle.removeClass('active');toggle.parent().removeClass('expand');targetBody.removeClass('menu-expand');if(targetBody.hasClass('social-display')){targetBody.removeClass('social-display')}}else{toggle.addClass('active').parent().addClass('expand');btnGlobal.not(this).removeClass('active').parent().removeClass('expand');targetBody.addClass('menu-expand');if(!targetBody.hasClass('social-display')){targetBody.addClass('social-display')}
var windowWidth=$(window).width();if(windowWidth>767){$('.menu-search #search-block-form .form-text').focus()}}});pageHeader.on('click','.header-meta.desktop .header-editions .m-expand',function(event){var toggle=$(this);if(toggle.hasClass('active')){toggle.removeClass('active').parent().removeClass('expand');targetBody.removeClass('menu-expand')}else{toggle.addClass('active').parent().addClass('expand');btnGlobal.not(this).removeClass('active').parent().removeClass('expand');targetBody.addClass('menu-expand')}});pageHeader.on('click','.header-meta.mobile .m-expand',function(event){var toggle=$(this);if(toggle.hasClass('subscribe')){return}
targetBody.addClass('menu-expand');btnMenu.addClass('active');if(toggle.hasClass('edition')){$('.header-meta.desktop .header-editions').addClass('expand')}});pageHeader.on('click','.m-expand.back',function(event){var toggle=$(this);toggle.closest('.expand').removeClass('expand');btnMenu.addClass('active').parent().addClass('expand')})}
$(document).click(function(event){if(!$(event.target).closest('.dropdown').length&&!$(event.target).closest('.expand').length){Drupal.behaviors.newsweek.menuCollapse()}})},menuCollapse:function(){$('.m-expand').removeClass('active').parent().removeClass('expand')},closeAll:function(){this.menuCollapse()},carousel:function(){if($.fn.owlCarousel&&$('#in_the_mag_carousel').length){var in_the_mag=$("#in_the_mag_carousel");var limit=3;var count=in_the_mag.children().length;var width=$('body').width();Drupal.behaviors.carousel_bk=in_the_mag.clone().children();if(width>=768)limit=9;if(width>=992)limit=6;if(count>limit){while(count>limit){count--;in_the_mag.children().last().remove()}}
in_the_mag.owlCarousel({loop:!1,autoplay:!1,autoplayHoverPause:!1,responsive:{0:{items:1,nav:!0,dots:!1,onInitialized:function(e){setTimeout(function(){Drupal.behaviors.newsweek.resizeCarouselNav()},100)},onResized:function(e){Drupal.behaviors.newsweek.resizeCarouselNav()},},768:{items:2,slideBy:2,nav:!0,dots:!1,onInitialized:function(e){setTimeout(function(){Drupal.behaviors.newsweek.resizeCarouselNav()},100)},onResized:function(e){Drupal.behaviors.newsweek.resizeCarouselNav()},},992:{items:3,slideBy:3,nav:!0,dots:!1,onInitialized:function(e){setTimeout(function(){Drupal.behaviors.newsweek.resizeCarouselNav()},100)},onResized:function(e){Drupal.behaviors.newsweek.resizeCarouselNav()},}},onResize:function(e){Drupal.behaviors.newsweek.setCarouselItems(e)},onRefresh:function(e){var visible=e.page.size;if(visible){$(e.target).find('.owl-item').each(function(key,value){if(key<visible){$(value).find('img').each(function(index,img){$(img).attr('src',$(img).attr('data-src'))})}})}},})}
if($.fn.owlCarousel&&$('#reference_stories_carousel').length){var reference_stories=$('#reference_stories_carousel');reference_stories.owlCarousel({loop:!1,autoplay:!1,autoplayHoverPause:!1,responsive:{0:{items:1,autoHeight:!0,nav:!0,dots:!1,onInitialized:function(e){setTimeout(function(){Drupal.behaviors.newsweek.resizeCarouselNav()},100)},onResized:function(e){Drupal.behaviors.newsweek.resizeCarouselNav()},},768:{items:2,slideBy:2,nav:!0,dots:!1,onInitialized:function(e){setTimeout(function(){Drupal.behaviors.newsweek.resizeCarouselNav()},100)},onResized:function(e){Drupal.behaviors.newsweek.resizeCarouselNav()},},992:{items:4,slideBy:4,nav:!1,dots:!1,}},})}
if($.fn.owlCarousel&&$('#green_carousel').length){var green_carousel=$("#green_carousel");green_carousel.owlCarousel({responsive:{0:{items:1,loop:!1,nav:!0,dots:!1,autoHeight:!0},768:{items:3,slideBy:3,loop:!1,nav:!0,dots:!1,autoHeight:!0}},})}},setCarouselItems:function(e){var count=e.item.count;var width=$('body').width();var limit=4;if(width>=768)limit=8;if(width>=992)limit=16;while(count>0){count--;$(e.target).trigger('remove.owl.carousel',1)}
items=Drupal.behaviors.carousel_bk;while(count<limit){var html=items.eq(count).html();count++;if(html)$(e.target).trigger('add.owl.carousel','<li>'+html+'</li>')}},resizeCarouselNav:function(){var owlNav=$('.feature.magazine .owl-nav');var owlItemImage=$('.feature.magazine article:first-of-type .image').height();if(owlNav.length){var topPosition=owlItemImage/2-29;owlNav.css('top',topPosition)}},setSponsorHeight:function(){var sponsor=$('#block-nw-home-featured-story li.sponsor .info');if(!sponsor.length){return}
Drupal.behaviors.newsweek.calculateHeight(sponsor);$(window).on('resize',function(){Drupal.behaviors.newsweek.calculateHeight(sponsor)})},calculateHeight:function(sponsor){var windowWidth=$(window).width();if(windowWidth<768){sponsor.css('min-height','');return}
var sibling=$('#block-nw-home-featured-story li.first .info');var height=sibling.outerHeight();sponsor.css('min-height',height)},toggleExpandableHeight:function(){if($('#block-nw-magazine-article-header').length>0){var obj=$('#block-nw-magazine-article-header figure img');var obj_h=obj.outerHeight();var win_h=$(window).height()-50;if(obj_h<win_h){obj.css({'max-height':'inherit','width':'100%'})}else{obj.css({'max-height':'calc(100vh - 50px)','width':'auto'})}
$(window).on('resize',function(){var obj_h=obj.outerHeight();var win_h=$(window).height()-50;if(obj_h<win_h){obj.css({'max-height':'inherit','width':'100%'})}else{obj.css({'max-height':'calc(100vh - 50px)','width':'auto'})}})}
if($('.article-body .expandable').length>0){var windowWidth=$(window).width();if(windowWidth>991){var toggleHeight=445}else{var toggleHeight=290}
$('.expandable-toggle').removeClass('active');$('.expandable').css('height',toggleHeight);$('body').on('click','.expandable-toggle .toggle',function(event){var toggle=$('.expandable-toggle');if(toggle.hasClass('active')){toggle.removeClass('active');$('.expandable').addClass('collapsed').css('height',toggleHeight)}else{toggle.addClass('active');$('.expandable').removeClass('collapsed').css('height','auto')}})}else{$('body').on('click','.expandable-toggle .toggle',function(event){var toggle=$(this).parent('.expandable-toggle');if(toggle.hasClass('active')){toggle.removeClass('active');$('.expandable').css('height','115px')}else{toggle.addClass('active');$('.expandable').css('height','auto')}})}},toggleLiveStream:function(){$('.livestream-article .image').on('click',function(){$(this).parent().find('.livestream-embed').html(Drupal.settings.livestreamEmbed.code);$(this).remove();$('.feature li.large .info-wrapper').css('margin-top',0);return!1})},fontfaceObserver:function(){var observer1=new FontFaceObserver('Roboto Condensed');observer1.load().then(function(){console.log('Font1 is available')},function(){console.log('Font1 is not available')})},webfontLoader:function(){WebFont.load({custom:{families:['Roboto Condensed:300,400,700'],urls:['https://g.newsweek.com/themes/newsweek/css/fonts_inline.css']}})}}})(jQuery)})