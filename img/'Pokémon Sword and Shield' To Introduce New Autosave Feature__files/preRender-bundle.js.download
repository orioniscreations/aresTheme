(window.webpackJsonp_spotim_580132258=window.webpackJsonp_spotim_580132258||[]).push([[59],{1663:function(e,t,n){"use strict";var i=n(0),o=n(29);Object.defineProperty(t,"__esModule",{value:!0}),t.render=function(e,t,n){var i=document.createElement("div");"true"!==e.dataset.spotimConversationPage&&c.isUseShadowDomOnMain&&i.attachShadow&&window.__SPOTIM__.stylesheetElementAdded&&(i.attachShadow({mode:"open"}),(0,l.exposeAnimationEvents)(i,{defensiveMode:v}));i.setAttribute("data-spot-im-shadow-host",g),e.appendChild(i),(0,f.initUserClickTracker)((0,p.getElementId)(e)),a.default.render(r.default.createElement(r.Suspense,{fallback:null},r.default.createElement(s.Provider,{store:t.store},r.default.createElement(h,{element:e}))),i.shadowRoot||i,n)};var r=o(n(3)),a=i(n(2)),s=n(42);n(653);var c=o(n(69)),l=n(8),u=i(n(4)),d=n(9),f=n(1664),p=n(313),v=u.default.get("tenant_config.shared.defensiveJsMode",!1),g=u.default.get("tenant_config.conversation.cssModulesForShadowDOM","conversation conversation-survey @spotim/ui-components @spotim/ads @spotim/user-image feed @spotim/entities @spotim/user-info"),h=function(e){var t=(0,s.useSelector)((function(e){return e.appState})),n=t.isUserInitialized,i=t.isTranslationInitialize,o=t.isTokenInitialized;return(0,r.useEffect)((function(){n&&i&&o&&(0,d.detachLoader)(e.element)}),[n,i,o]),n&&i&&o?r.default.createElement(r.Suspense,{fallback:null},r.default.createElement(c.default,{container:e.element})):null}},1664:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initUserClickTracker=void 0;var i=n(52),o=n(340),r=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},a=function(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};t.initUserClickTracker=function(e){(0,o.getDocumentOrShadowRoot)(e).addEventListener("click",(function(e){var t,n,o,s;return r(this,void 0,void 0,(function(){var r,c,l;return a(this,(function(a){return(r=null===(n=(t=null==e?void 0:e.target).getAttribute)||void 0===n?void 0:n.call(t,"data-spot-im-class"))&&(c=null===(s=(o=null==e?void 0:e.target).getBoundingClientRect)||void 0===s?void 0:s.call(o),l=new CustomEvent(i.USER_CLICK,{detail:{spotImClass:r,elementTop:c.top}}),document.dispatchEvent(l)),[2]}))}))}),!1)}},1669:function(e,t,n){"use strict";var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.sendConvAsyncData=function(e,t,n){var i=t.href,r=t.ignoreHostUrl,a=t.canonicalHref,s=t.highlight,c=t.disqusIdentifier,l=t.disqusUrl,u=t.gigyaStreamId,d=t.gigyaCategoryId,f=t.wpImportEndpoint,p=t.facebookUrl,v=t.livefyreUrl,g=t.iosUrl,h=t.androidUrl,b=t.isRecommendedPost,m=t.conversationAuthorId,y=t.conversationArticleTags,w=t.isConversationLiveBlog,_={platform:n?"mobile":"desktop"};if(m||y){var O={};m&&Object.assign(O,{author_id:m}),y&&Object.assign(O,{article_tags:y.trim()}),Object.assign(_,{metadata:O})}g&&Object.assign(_,{ios_url:g});h&&Object.assign(_,{android_url:h});b||Object.assign(_,{recommended_post:b});i&&Object.assign(_,{host_url:i});a&&Object.assign(_,{canonical_url:a});s&&Object.assign(_,{highlight:s});r&&Object.assign(_,{ignore_host_url:r});w&&Object.assign(_,{is_conversation_live_blog:w});var j={};c&&Object.assign(j,{disqus_identifier:c});l&&Object.assign(j,{disqus_url:l});u&&Object.assign(j,{gigya_streamid:u});d&&Object.assign(j,{gigya_categoryid:d});p&&Object.assign(j,{facebook_url:p});v&&Object.assign(j,{livefyre_url:v});f&&Object.assign(j,{wp_import_endpoint:f});Object.keys(j).length>0&&Object.assign(_,{import_hints:j});return(0,o.default)("v1.0.0/conversation/async",{postId:e,method:"POST",data:_})};var o=i(n(62))},26:function(e,t,n){"use strict";var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.preRender=function(e,t){return m(this,void 0,void 0,(function(){var n,i,p,m,w,_,O,j,S,k,C;return y(this,(function(y){n=(0,d.getElementId)(e),i=t.store.getState(),p=t.postId,m=t.isConversationPage,w=t.isLiveBlog,_=t.contentType,O=(0,r.getModuleOptions)(i,n),j=O.styleBlock,S=O.scriptBlock,k=O.isMobile;try{m||(C=g.enableCommunityView&&!w&&(0,h.getCommunityView)(i),(0,v.default)(p).startObservingOn(e,C||"conversation"))}catch(e){(0,o.default)({module:"conversation 3",description:"time-spent not properly initialized"},new Error)}if(S)try{S=(0,a.extractSection)(S,"conversation-frame"),(0,l.default)(e,void 0,{content:S})}catch(e){(0,o.default)({module:"conversation",description:"JS injection: critical error"},e)}if(j)try{j=(0,a.extractSection)(j,"conversation-frame"),(0,c.injectStyleTag)(j)}catch(e){(0,o.default)({module:"conversation",description:"CSS injection: critical error"},e)}return(0,s.render)(e,t,(function(){S&&(S=(0,a.extractSection)(S,"conversation-frame"),(0,l.default)(e,void 0,{content:S})),j&&(j=(0,a.extractSection)(j,"conversation-frame"),(0,c.injectStyleTag)(j));var i=(0,r.getModuleOptions)(t.store.getState(),n);_&&_!==b.ContentType.Post&&(0,f.sendConvAsyncData)(p,i,k)})),(0,u.default)(),[2]}))}))};var o=i(n(5)),r=n(66),a=n(1662),s=n(1663),c=n(1665),l=i(n(308));n(1666);var u=i(n(1667)),d=n(313),f=n(1669),p=n(249),v=i(n(637)),g=n(342),h=n(48),b=n(44),m=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},y=function(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};(0,p.pageViewIdListener)()}}]);
//# sourceMappingURL=preRender-bundle.js.map